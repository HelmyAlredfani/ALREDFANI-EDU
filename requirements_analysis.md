# تحليل متطلبات نظام إدارة نتائج الطلاب

## نظرة عامة
نظام إدارة نتائج الطلاب هو تطبيق ويب متكامل يتيح للمعلمين والإداريين إدارة بيانات الطلاب والمواد الدراسية وإدخال الدرجات، كما يتيح للطلاب وأولياء الأمور البحث عن النتائج وتنزيلها بصيغة PDF احترافية.

## المتطلبات الوظيفية

### 1. إدارة المستخدمين والصلاحيات
- **مدير النظام (Admin)**:
  - تسجيل الدخول باسم المستخدم `alredfani` وكلمة المرور `73345`
  - صلاحيات كاملة لإنشاء وتعديل وحذف كل شيء في النظام
  - إضافة/تعديل/حذف معلمين (مستخدمين آخرين)
  - تحديد صلاحيات للمعلمين

- **المعلمون**:
  - تسجيل الدخول ببياناتهم الخاصة
  - إدخال/تعديل درجات الطلاب للمواد أو الصفوف المخصصة لهم
  - عرض نتائج طلابهم (اختياري)

### 2. إدارة البيانات الأساسية
- **إدارة المواد الدراسية**:
  - إضافة، تعديل، حذف المواد (اسم المادة، رمز المادة)

- **إدارة الطلاب**:
  - إضافة، تعديل، حذف بيانات الطلاب (الاسم الكامل، رقم الجلوس، الصف/المرحلة، تاريخ الميلاد)
  - التأكد من أن رقم الجلوس فريد

- **إدارة الصفوف/المراحل**:
  - تحديد الصفوف الدراسية المتاحة

- **إدارة الفترات الدراسية**:
  - تحديد الفصول الدراسية أو السنوات الأكاديمية

### 3. إدخال النتائج
- واجهة سهلة لاختيار الطالب أو مجموعة طلاب
- اختيار المادة الدراسية والفترة الدراسية
- إدخال الدرجة (الدرجة العددية، والتقدير تلقائياً)
- حفظ النتائج في قاعدة البيانات
- إمكانية تعديل الدرجات المدخلة (مع تسجيل من قام بالتعديل ومتى)

### 4. البحث عن النتائج
- واجهة بحث بسيطة ومتاحة للعامة
- إمكانية البحث باستخدام اسم الطالب أو رقم الجلوس
- عرض النتائج بشكل واضح ومنظم

### 5. تنزيل النتائج بصيغة PDF
- زر لتنزيل النتيجة المعروضة
- تصميم احترافي للـ PDF يتضمن:
  - شعار المدرسة/المؤسسة واسمها
  - عنوان واضح
  - بيانات الطالب الأساسية
  - جدول بالمواد والدرجات
  - المجموع الكلي والنسبة المئوية والتقدير العام
  - تاريخ إصدار النتيجة
  - مكان لختم وتوقيع الإدارة (اختياري)

## تصميم قاعدة البيانات

### الجداول الرئيسية

#### 1. جدول المستخدمين (users)
- id (PK)
- username
- password (مشفرة)
- name
- email
- role_id (FK)
- created_at
- updated_at

#### 2. جدول الأدوار (roles)
- id (PK)
- name
- description
- created_at
- updated_at

#### 3. جدول الصلاحيات (permissions)
- id (PK)
- name
- description
- created_at
- updated_at

#### 4. جدول ربط الأدوار بالصلاحيات (role_permissions)
- id (PK)
- role_id (FK)
- permission_id (FK)
- created_at
- updated_at

#### 5. جدول الطلاب (students)
- id (PK)
- full_name
- student_id (رقم الجلوس - فريد)
- class_id (FK)
- birth_date
- created_at
- updated_at

#### 6. جدول الصفوف/المراحل (classes)
- id (PK)
- name
- description
- created_at
- updated_at

#### 7. جدول المواد الدراسية (subjects)
- id (PK)
- name
- code
- max_score
- min_score
- created_at
- updated_at

#### 8. جدول الفترات الدراسية (academic_periods)
- id (PK)
- name
- start_date
- end_date
- created_at
- updated_at

#### 9. جدول النتائج (results)
- id (PK)
- student_id (FK)
- subject_id (FK)
- academic_period_id (FK)
- score
- grade (التقدير)
- created_by (FK - users)
- updated_by (FK - users)
- created_at
- updated_at

## العلاقات بين الجداول

1. **المستخدمين والأدوار**: كل مستخدم له دور واحد، وكل دور يمكن أن يكون لعدة مستخدمين (علاقة 1:n)
2. **الأدوار والصلاحيات**: كل دور له عدة صلاحيات، وكل صلاحية يمكن أن تكون لعدة أدوار (علاقة n:m)
3. **الطلاب والصفوف**: كل طالب ينتمي لصف واحد، وكل صف يمكن أن يضم عدة طلاب (علاقة 1:n)
4. **النتائج والطلاب**: كل نتيجة تنتمي لطالب واحد، وكل طالب يمكن أن يكون له عدة نتائج (علاقة 1:n)
5. **النتائج والمواد**: كل نتيجة تنتمي لمادة واحدة، وكل مادة يمكن أن يكون لها عدة نتائج (علاقة 1:n)
6. **النتائج والفترات الدراسية**: كل نتيجة تنتمي لفترة دراسية واحدة، وكل فترة دراسية يمكن أن تضم عدة نتائج (علاقة 1:n)
7. **النتائج والمستخدمين**: كل نتيجة تم إنشاؤها وتحديثها بواسطة مستخدم، وكل مستخدم يمكن أن يكون قد أنشأ أو حدث عدة نتائج (علاقة 1:n)

## مخطط قاعدة البيانات (ER Diagram)

```
users 1--* roles
roles *--* permissions (عبر role_permissions)
students *--1 classes
results *--1 students
results *--1 subjects
results *--1 academic_periods
results *--1 users (created_by)
results *--1 users (updated_by)
```

## التقنيات المقترحة

### الواجهة الخلفية (Backend)
- لغة البرمجة: PHP مع إطار عمل Laravel
- قاعدة البيانات: MySQL

### الواجهة الأمامية (Frontend)
- HTML, CSS, JavaScript
- إطار عمل Bootstrap للتصميم المتجاوب
- مكتبة jQuery لتحسين تجربة المستخدم

### توليد ملفات PDF
- مكتبة DomPDF للتحويل من HTML إلى PDF

## متطلبات الأمان
- تشفير كلمات المرور باستخدام تقنيات Hashing قوية
- التحقق من مدخلات المستخدم لمنع الحقن (SQL Injection, XSS)
- استخدام HTTPS لتشفير الاتصال
- تطبيق الصلاحيات بشكل صحيح على جميع العمليات
- إلزام تغيير كلمة المرور الافتراضية للمدير بعد أول تسجيل دخول
